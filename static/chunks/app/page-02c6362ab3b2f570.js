(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7173:function(e,r,s){Promise.resolve().then(s.bind(s,3697))},3697:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return R}});var t=s(7437),a=s(2265),l=s(4227),n=s(9954),i=s(3157),d=s(8063),c=s(2851),o=s(8291),m=s(9764),x=s(4949),u=s(6061),f=s(7042),h=s(4769);function p(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,h.m6)((0,f.W)(r))}let g=(0,u.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),b=a.forwardRef((e,r)=>{let{className:s,variant:a,size:l,asChild:n=!1,...i}=e,d=n?x.g7:"button";return(0,t.jsx)(d,{className:p(g({variant:a,size:l,className:s})),ref:r,...i})});b.displayName="Button";let v=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:p("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});v.displayName="Card";let N=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:p("flex flex-col space-y-1.5 p-6",s),...a})});N.displayName="CardHeader";let j=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h3",{ref:r,className:p("text-2xl font-semibold leading-none tracking-tight",s),...a})});j.displayName="CardTitle";let y=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("p",{ref:r,className:p("text-sm text-muted-foreground",s),...a})});y.displayName="CardDescription";let w=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:p("p-6 pt-0",s),...a})});w.displayName="CardContent";let C=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:p("flex items-center p-6 pt-0",s),...a})});C.displayName="CardFooter";var k=s(3632);let Z=a.forwardRef((e,r)=>{let{className:s,value:a,...l}=e;return(0,t.jsx)(k.fC,{ref:r,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,t.jsx)(k.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});function R(){let[e,r]=(0,a.useState)(0),[s,x]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[g,N]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),w=(0,a.useRef)(null),C=async()=>{if(u){N(!0),r(0),y(null);try{let e=new FormData;e.append("image",u),e.append("shortSide","1080");let s=setInterval(()=>{r(e=>e>=90?(clearInterval(s),e):e+10)},500),t=await fetch("/api/process-image",{method:"POST",body:e});if(clearInterval(s),!t.ok){let e=await t.json();throw Error(e.error||"图片处理失败")}let a=await t.blob(),l=URL.createObjectURL(a);p(l),r(100)}catch(e){console.error("处理错误:",e),y(e instanceof Error?e.message:"图片处理失败"),r(0)}finally{N(!1)}}};return(0,t.jsx)("main",{className:"min-h-screen hero-gradient text-white",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-16 max-w-[1364px]",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center mb-16",children:[(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"w-12 h-12 mb-4 relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#4f46e5] rounded-full blur-2xl opacity-20 animate-pulse"}),(0,t.jsx)(l.Z,{className:"w-full h-full text-[#ec4899]"})]}),{}),(0,t.jsx)("h1",{className:"text-4xl font-bold shine-text mb-4",children:"朋友圈图片优化处理"}),(0,t.jsx)("p",{className:"text-lg text-gray-300 max-w-2xl leading-relaxed",children:"一键修复微信压缩失真，将短边调整为1080像素，让朋友圈照片展现完美画质"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[(0,t.jsx)(v,{className:"p-6 hero-card",children:(0,t.jsxs)("div",{className:"upload-zone rounded-xl p-8 flex flex-col items-center justify-center min-h-[350px] relative group ".concat(s?"dragging":""),onDragEnter:()=>x(!0),onDragLeave:()=>x(!1),onDrop:e=>{var r;e.preventDefault(),x(!1);let s=null===(r=e.dataTransfer.files)||void 0===r?void 0:r[0];if(s&&s.type.startsWith("image/")){if(s.size>31457280){y("图片大小不能超过 30MB");return}f(s),p(null),y(null)}},children:[(0,t.jsx)("input",{ref:w,type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*",onChange:e=>{var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];if(s){if(s.size>31457280){y("图片大小不能超过 30MB");return}f(s),p(null),y(null)}}}),u?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium mb-2",children:u.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:[(u.size/1048576).toFixed(2)," MB"]}),(0,t.jsx)(b,{className:"mt-4 bg-transparent border border-white/20 hover:border-[#4f46e5] hover:bg-[#4f46e5]/10",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:"重新选择"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#4f46e5] rounded-full blur-2xl opacity-20 animate-pulse"}),(0,t.jsx)(n.Z,{className:"w-16 h-16 mb-4 transition-all duration-300 ".concat(s?"text-[#ec4899]":"text-gray-400")})]}),(0,t.jsx)("p",{className:"text-lg font-medium transition-all duration-300 ".concat(s?"text-[#ec4899]":"text-gray-300"),children:"拖入微信压缩图片或点击上传"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"支持 JPG、PNG 格式，大小不超过30MB"})]})]})}),(0,t.jsx)(v,{className:"p-6 hero-card",children:(0,t.jsxs)("div",{className:"min-h-[350px] flex flex-col",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-6 shine-text",children:"图片优化信息"}),(0,t.jsxs)("div",{className:"mb-8 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 text-green-400 mr-3"}),(0,t.jsx)("p",{className:"text-gray-300",children:"短边将调整为1080像素，长边保持比例"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 text-green-400 mr-3"}),(0,t.jsx)("p",{className:"text-gray-300",children:"高分辨率输出 (300 DPI)"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 text-green-400 mr-3"}),(0,t.jsx)("p",{className:"text-gray-300",children:"防止微信二次压缩"})]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("label",{className:"text-base text-gray-300 mb-2 block",children:"处理进度"}),(0,t.jsx)(Z,{value:e,className:"w-full h-2 rounded-full progress-bar",children:(0,t.jsx)("div",{className:"h-full progress-fill rounded-full transition-all duration-300",style:{width:"".concat(e,"%")}})})]}),j&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center text-red-400",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),j]}),(0,t.jsxs)("div",{className:"mt-auto space-y-3",children:[(0,t.jsxs)(b,{className:"w-full h-12 text-base button-primary rounded-xl",onClick:C,disabled:!u||g,children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),g?"处理中...":"开始处理",(0,t.jsx)(o.Z,{className:"w-4 h-4 ml-2"})]}),(0,t.jsxs)(b,{className:"w-full h-10 bg-transparent border border-white/20 hover:border-[#4f46e5] hover:bg-[#4f46e5]/10 transition-all duration-300 text-white",onClick:()=>{if(!h)return;let e=document.createElement("a");e.href=h,e.download="processed-image.jpg",document.body.appendChild(e),e.click(),document.body.removeChild(e)},disabled:!h,children:[(0,t.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"下载处理后的图片"]})]})]})})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[{title:"短边1080像素",description:"确保图片不会被微信二次压缩，保持最佳画质",icon:l.Z},{title:"高清输出",description:"高分辨率处理，完美还原每一个精彩瞬间",icon:n.Z},{title:"一键处理",description:"简单快捷，无需复杂设置，让图片处理更轻松",icon:m.Z}].map((e,r)=>(0,t.jsxs)(v,{className:"p-8 feature-card",children:[(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#4f46e5] rounded-full blur-xl opacity-20"}),(0,t.jsx)(e.icon,{className:"w-12 h-12 text-[#ec4899] relative z-10"})]}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-3 shine-text",children:e.title}),(0,t.jsx)("p",{className:"text-gray-300 leading-relaxed",children:e.description})]},r))})]})})}Z.displayName=k.fC.displayName}},function(e){e.O(0,[610,971,864,744],function(){return e(e.s=7173)}),_N_E=e.O()}]);